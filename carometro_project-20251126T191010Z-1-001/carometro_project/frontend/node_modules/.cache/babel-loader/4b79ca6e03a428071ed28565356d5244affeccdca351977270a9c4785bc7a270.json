{"ast":null,"code":"const API = \"http://localhost:8080/api\";\nexport async function apiFetch(path, opts = {}, token) {\n  const headers = opts.headers || {};\n  if (token) {\n    headers['X-Auth-Token'] = token;\n  }\n  if (!(opts.body instanceof FormData)) {\n    headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n  }\n  const fetchOptions = {\n    ...opts,\n    headers\n  };\n  if (opts.body !== undefined) {\n    fetchOptions.body = opts.body;\n  }\n  const res = await fetch(API + path, fetchOptions);\n  if (res.status === 401) throw new Error('unauth');\n  return res.json();\n}\nexport async function login(username, password) {\n  return apiFetch('/auth/login', {\n    method: 'POST',\n    body: JSON.stringify({\n      username,\n      password\n    })\n  });\n}\nexport async function fetchStudents(filters = {}, token) {\n  const params = new URLSearchParams(filters).toString();\n  return apiFetch('/students' + (params ? '?' + params : ''), {\n    method: 'GET'\n  }, token);\n}\nexport async function createStudent(student, token) {\n  return apiFetch('/students', {\n    method: 'POST',\n    body: JSON.stringify(student)\n  }, token);\n}\nexport async function updateStudent(id, student, token) {\n  return apiFetch(`/students/${id}`, {\n    method: 'PUT',\n    body: JSON.stringify(student)\n  }, token);\n}\nexport async function uploadPhoto(studentId, file, token) {\n  const formData = new FormData();\n  formData.append('file', file);\n  return apiFetch(`/students/${studentId}/photo`, {\n    method: 'POST',\n    body: formData\n  }, token);\n}\nexport async function createEvaluation(ev, token) {\n  return apiFetch('/evaluations', {\n    method: 'POST',\n    body: JSON.stringify(ev)\n  }, token);\n}\nexport async function last5(studentId, token) {\n  return apiFetch(`/evaluations/student/${studentId}/last5`, {\n    method: 'GET'\n  }, token);\n}","map":{"version":3,"names":["API","apiFetch","path","opts","token","headers","body","FormData","fetchOptions","undefined","res","fetch","status","Error","json","login","username","password","method","JSON","stringify","fetchStudents","filters","params","URLSearchParams","toString","createStudent","student","updateStudent","id","uploadPhoto","studentId","file","formData","append","createEvaluation","ev","last5"],"sources":["/home/rafael/Downloads/carometro_project-20251126T191010Z-1-001/carometro_project/frontend/src/services/api.js"],"sourcesContent":["const API = \"http://localhost:8080/api\";\n\nexport async function apiFetch(path, opts = {}, token){\n  const headers = opts.headers || {};\n\n  if(token) {\n    headers['X-Auth-Token'] = token;\n  }\n\n  if(!(opts.body instanceof FormData)) {\n    headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n  }\n\n  const fetchOptions = { ...opts, headers };\n\n  if(opts.body !== undefined) {\n    fetchOptions.body = opts.body;\n  }\n\n  const res = await fetch(API + path, fetchOptions);\n\n  if(res.status===401) throw new Error('unauth');\n\n  return res.json();\n}\n\nexport async function login(username, password){\n  return apiFetch('/auth/login', {\n    method:'POST',\n    body: JSON.stringify({ username, password })\n  });\n}\n\nexport async function fetchStudents(filters={}, token){\n  const params = new URLSearchParams(filters).toString();\n  return apiFetch('/students' + (params ? '?' + params : ''), { method:'GET' }, token);\n}\n\nexport async function createStudent(student, token){\n  return apiFetch('/students', {\n    method:'POST',\n    body: JSON.stringify(student)\n  }, token);\n}\n\nexport async function updateStudent(id, student, token){\n  return apiFetch(`/students/${id}`, {\n    method:'PUT',\n    body: JSON.stringify(student)\n  }, token);\n}\n\nexport async function uploadPhoto(studentId, file, token){\n  const formData = new FormData();\n  formData.append('file', file);\n\n  return apiFetch(`/students/${studentId}/photo`, {\n    method:'POST',\n    body: formData\n  }, token);\n}\n\nexport async function createEvaluation(ev, token){\n  return apiFetch('/evaluations', {\n    method:'POST',\n    body: JSON.stringify(ev)\n  }, token);\n}\n\nexport async function last5(studentId, token){\n  return apiFetch(`/evaluations/student/${studentId}/last5`, {\n    method:'GET'\n  }, token);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}