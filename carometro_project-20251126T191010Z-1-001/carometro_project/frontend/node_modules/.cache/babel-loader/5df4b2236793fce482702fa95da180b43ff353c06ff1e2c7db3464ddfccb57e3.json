{"ast":null,"code":"const API = '/api';\nexport async function apiFetch(url, method = \"GET\", body = null, token = null) {\n  const headers = {};\n  if (!(body instanceof FormData)) {\n    headers[\"Content-Type\"] = \"application/json\";\n  }\n  if (token) {\n    headers[\"X-Auth-Token\"] = token; // <- PRECISA SER EXATAMENTE ASSIM\n  }\n  const r = await fetch(url, {\n    method,\n    headers,\n    body\n  });\n  if (r.status === 401) {\n    throw new Error(\"unauth\");\n  }\n  return r.json();\n}\nexport async function login(username, password) {\n  return apiFetch('/auth/login', {\n    method: 'POST',\n    body: JSON.stringify({\n      username,\n      password\n    })\n  });\n}\nexport async function fetchStudents(filters = {}, token) {\n  const params = new URLSearchParams(filters).toString();\n  return apiFetch('/students' + (params ? '?' + params : ''), {\n    method: 'GET'\n  }, token);\n}\nexport async function createStudent(student, token) {\n  return apiFetch('/students', {\n    method: 'POST',\n    body: JSON.stringify(student)\n  }, token);\n}\nexport async function updateStudent(id, student, token) {\n  return apiFetch('/students/' + id, {\n    method: 'PUT',\n    body: JSON.stringify(student)\n  }, token);\n}\nexport async function uploadPhoto(studentId, file, token) {\n  const formData = new FormData();\n  formData.append('file', file);\n  const res = await fetch(`/api/students/${studentId}/photo`, {\n    method: 'POST',\n    headers: {\n      'X-Auth-Token': token\n    },\n    body: formData\n  });\n  return res.json();\n}\nexport async function createEvaluation(ev, token) {\n  return apiFetch('/evaluations', {\n    method: 'POST',\n    body: JSON.stringify(ev)\n  }, token);\n}\nexport async function last5(studentId, token) {\n  return apiFetch('/evaluations/student/' + studentId + '/last5', {\n    method: 'GET'\n  }, token);\n}","map":{"version":3,"names":["API","apiFetch","url","method","body","token","headers","FormData","r","fetch","status","Error","json","login","username","password","JSON","stringify","fetchStudents","filters","params","URLSearchParams","toString","createStudent","student","updateStudent","id","uploadPhoto","studentId","file","formData","append","res","createEvaluation","ev","last5"],"sources":["/home/rafael/Downloads/carometro_project-20251126T191010Z-1-001/carometro_project/frontend/src/services/api.js"],"sourcesContent":["const API = '/api';\n\nexport async function apiFetch(url, method=\"GET\", body=null, token=null){\n  const headers = {};\n  if(!(body instanceof FormData)){\n    headers[\"Content-Type\"] = \"application/json\";\n  }\n  if(token){\n    headers[\"X-Auth-Token\"] = token;     // <- PRECISA SER EXATAMENTE ASSIM\n  }\n  const r = await fetch(url, {method, headers, body});\n  if(r.status === 401){\n    throw new Error(\"unauth\");\n  }\n  return r.json();\n}\n\nexport async function login(username, password){\n  return apiFetch('/auth/login', {method:'POST', body: JSON.stringify({username,password})});\n}\n\nexport async function fetchStudents(filters={}, token){\n  const params = new URLSearchParams(filters).toString();\n  return apiFetch('/students' + (params?('?'+params):''), {method:'GET'}, token);\n}\n\nexport async function createStudent(student, token){ return apiFetch('/students', {method:'POST', body: JSON.stringify(student)}, token); }\nexport async function updateStudent(id, student, token){ return apiFetch('/students/'+id, {method:'PUT', body: JSON.stringify(student)}, token); }\n\n\nexport async function uploadPhoto(studentId, file, token){\n  const formData = new FormData();\n  formData.append('file', file);\n\n  const res = await fetch(`/api/students/${studentId}/photo`, {\n    method: 'POST',\n    headers: { 'X-Auth-Token': token },\n    body: formData\n  });\n  return res.json();\n}\n\n\n\nexport async function createEvaluation(ev, token){ return apiFetch('/evaluations', {method:'POST', body: JSON.stringify(ev)}, token); }\nexport async function last5(studentId, token){ return apiFetch('/evaluations/student/'+studentId+'/last5', {method:'GET'}, token); }\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}