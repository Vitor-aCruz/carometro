{"ast":null,"code":"const API = '/api';\nexport async function apiFetch(path, opts = {}, token) {\n  const headers = opts.headers || {};\n  if (token) headers['X-Auth-Token'] = token;\n  if (!(opts.body instanceof FormData)) headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n  const res = await fetch(API + path, {\n    ...opts,\n    headers,\n    body: opts.body\n  });\n  if (res.status === 401) throw new Error('unauth');\n  return res.json();\n}\nexport async function login(username, password) {\n  return apiFetch('/auth/login', {\n    method: 'POST',\n    body: JSON.stringify({\n      username,\n      password\n    })\n  });\n}\nexport async function fetchStudents(filters = {}, token) {\n  const params = new URLSearchParams(filters).toString();\n  return apiFetch('/students' + (params ? '?' + params : ''), {\n    method: 'GET'\n  }, token);\n}\nexport async function createStudent(student, token) {\n  return apiFetch('/students', {\n    method: 'POST',\n    body: JSON.stringify(student)\n  }, token);\n}\nexport async function updateStudent(id, student, token) {\n  return apiFetch('/students/' + id, {\n    method: 'PUT',\n    body: JSON.stringify(student)\n  }, token);\n}\nexport async function uploadPhoto(id, file, token) {\n  const fd = new FormData();\n  fd.append('file', file);\n  const res = await fetch('/api/students/' + id + '/photo', {\n    method: 'POST',\n    headers: {\n      'X-Auth-Token': token\n    },\n    body: fd\n  });\n  if (res.status === 401) throw new Error('unauth');\n  return res.json();\n}\nexport async function createEvaluation(ev, token) {\n  return apiFetch('/evaluations', {\n    method: 'POST',\n    body: JSON.stringify(ev)\n  }, token);\n}\nexport async function last5(studentId, token) {\n  return apiFetch('/evaluations/student/' + studentId + '/last5', {\n    method: 'GET'\n  }, token);\n}","map":{"version":3,"names":["API","apiFetch","path","opts","token","headers","body","FormData","res","fetch","status","Error","json","login","username","password","method","JSON","stringify","fetchStudents","filters","params","URLSearchParams","toString","createStudent","student","updateStudent","id","uploadPhoto","file","fd","append","createEvaluation","ev","last5","studentId"],"sources":["/home/rafael/Downloads/carometro_project-20251126T191010Z-1-001/carometro_project/frontend/src/services/api.js"],"sourcesContent":["const API = '/api';\n\nexport async function apiFetch(path, opts = {}, token){\n  const headers = opts.headers || {};\n  if(token) headers['X-Auth-Token'] = token;\n  if(!(opts.body instanceof FormData)) headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n  const res = await fetch(API + path, {...opts, headers, body: opts.body});\n  if(res.status===401) throw new Error('unauth');\n  return res.json();\n}\n\nexport async function login(username, password){\n  return apiFetch('/auth/login', {method:'POST', body: JSON.stringify({username,password})});\n}\n\nexport async function fetchStudents(filters={}, token){\n  const params = new URLSearchParams(filters).toString();\n  return apiFetch('/students' + (params?('?'+params):''), {method:'GET'}, token);\n}\n\nexport async function createStudent(student, token){ return apiFetch('/students', {method:'POST', body: JSON.stringify(student)}, token); }\nexport async function updateStudent(id, student, token){ return apiFetch('/students/'+id, {method:'PUT', body: JSON.stringify(student)}, token); }\n\n\nexport async function uploadPhoto(id, file, token){\n  const fd = new FormData(); fd.append('file', file);\n  const res = await fetch('/api/students/'+id+'/photo', {method:'POST', headers: {'X-Auth-Token': token}, body: fd});\n  if(res.status===401) throw new Error('unauth');\n  return res.json();\n}\n\n\nexport async function createEvaluation(ev, token){ return apiFetch('/evaluations', {method:'POST', body: JSON.stringify(ev)}, token); }\nexport async function last5(studentId, token){ return apiFetch('/evaluations/student/'+studentId+'/last5', {method:'GET'}, token); }\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}